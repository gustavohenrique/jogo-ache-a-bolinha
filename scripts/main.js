"use strict";var bolinha={seletor:"#bolinha",posicao:{leftInicial:30,left:30,topInicial:250,top:250}},start={seletor:"#start"},resultado={seletor:".resultado",venceu:{texto:"Aeee... Parabens!",cls:"alert-success"},perdeu:{texto:"Ooops... Tente novamente!",cls:"alert-danger"}},copo={A:{seletor:"#A",posicao:{leftInicial:0,left:0}},B:{seletor:"#B",posicao:{leftInicial:275,left:275}},C:{seletor:"#C",posicao:{leftInicial:545,left:545}},obterCopoAleatorio:function(){var o=Math.round(2*Math.random()),e={};switch(o){case 0:e=copo.A;break;case 1:e=copo.B;break;case 2:e=copo.C}return e},obterIndice:function(o,e){for(var t=0;t<o.length;t++)if(o[t].seletor===e.seletor)return t;return 0},obterLeftDeAcordoCom:function(o){var e=this,t=0;switch(o){case 0:t=e.A.posicao.leftInicial;break;case 1:t=e.B.posicao.leftInicial;break;case 2:t=e.C.posicao.leftInicial}return t},obterCoposQueSeraoMovidos:function(){for(var o=this,e=o.obterCopoAleatorio(),t=o.obterCopoAleatorio();e.seletor===t.seletor;)t=o.obterCopoAleatorio();return[e,t]}},jogo={numeroJogadas:0,maximoJogadas:5,vitorias:0,copoSelecionado:{},copos:[copo.A,copo.B,copo.C],desenhar:function(){$("#main").append('<div id="A" class="copo"></div><div id="B" class="copo"><div id="bolinha"></div></div><div id="C" class="copo"></div><div class="clear"></div>'),$(".content").append('<div class="resultado alert"></div><button id="start" class="btn btn-lg btn-primary">Start</button>'),$(copo.A.seletor).css("left",copo.A.posicao.leftInicial),$(copo.B.seletor).css("left",copo.B.posicao.leftInicial),$(copo.C.seletor).css("left",copo.C.posicao.leftInicial),$(".copo").on("click",function(){jogo.copoSelecionado=copo[this.id],jogo.confirmarCopoSelecionado(),jogo.posicionarBolinhaForaDoCopo(),$(bolinha.seletor).animate({top:bolinha.posicao.top},{complete:function(){jogo.exibirResultado(),$(start.seletor).removeClass("disabled")}})}),$(start.seletor).on("click",jogo.start)},trocarPosicao:function(o,e){var t=this,a=copo.obterIndice(t.copos,o),i=copo.obterIndice(t.copos,e);o.posicao.left=copo.obterLeftDeAcordoCom(i),e.posicao.left=copo.obterLeftDeAcordoCom(a),t.copos[a]=e,t.copos[i]=o},play:function(){var o=this,e=copo.obterCoposQueSeraoMovidos(),t=e[0],a=e[1];o.trocarPosicao(t,a),$.when($(t.seletor).animate({left:t.posicao.left}).promise(),$(a.seletor).animate({left:a.posicao.left}).promise()).done(function(){o.numeroJogadas<o.maximoJogadas&&(o.numeroJogadas++,o.play())})},posicionarBolinhaDentroDoCopo:function(){bolinha.posicao.top=bolinha.posicao.topInicial-170},posicionarBolinhaForaDoCopo:function(){bolinha.posicao.top=bolinha.posicao.topInicial},confirmarCopoSelecionado:function(){var o=jogo.copoSelecionado===copo.B?!0:!1;o&&jogo.vitorias++},exibirResultado:function(){var o=$(resultado.seletor),e=jogo.vitorias>0?resultado.venceu:resultado.perdeu;o.html(e.texto),o.removeClass(resultado.venceu.cls),o.removeClass(resultado.perdeu.cls),o.addClass(e.cls),o.show()},reset:function(){var o=this;o.vitorias=0,o.numeroJogadas=0,$(resultado.seletor).hide()},start:function(){jogo.reset(),jogo.posicionarBolinhaDentroDoCopo(),$(bolinha.seletor).animate({top:bolinha.posicao.top},{complete:function(){jogo.play(),$(start.seletor).addClass("disabled")}})}};